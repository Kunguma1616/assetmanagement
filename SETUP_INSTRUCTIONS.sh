#!/bin/bash
# Setup Instructions for Vehicle Asset Upload System

echo "üöÄ Fleet Health Monitor - Vehicle Asset System Setup"
echo "=========================================================="
echo ""

# Backend setup
echo "üì¶ Backend Setup:"
echo "1. Ensure all dependencies are installed:"
echo "   pip install -r backend/requirements.txt"
echo ""
echo "2. Required backend routes are already registered in app.py:"
echo "   ‚úÖ /api/vehicles/* (vehicle lookup)"
echo "   ‚úÖ /api/assets/* (asset management)"
echo "   ‚úÖ /api/ai/* (AI analysis)"
echo ""

# Frontend setup
echo "üé® Frontend Setup:"
echo "1. New pages available:"
echo "   ‚úÖ /upload - Upload and search vehicles"
echo "   ‚úÖ /assets - View all uploaded vehicles"
echo "   ‚úÖ /assets/:id - Detailed asset view"
echo ""

# Environment variables
echo "üîë Environment Variables Required:"
echo "Backend (.env file):"
echo "  SALESFORCE_USERNAME=your_sf_username"
echo "  SALESFORCE_PASSWORD=your_sf_password"
echo "  SALESFORCE_SECURITY_TOKEN=your_token"
echo "  SALESFORCE_CLIENT_ID=your_client_id"
echo "  SALESFORCE_CLIENT_SECRET=your_secret"
echo "  ANTHROPIC_API_KEY=your_claude_api_key (optional, for AI analysis)"
echo ""

# Database schema
echo "üìä Database Schema:"
echo "Vehicle__c (Salesforce Object):"
echo "  - Id (PK)"
echo "  - Name (Vehicle Name)"
echo "  - Van_Number__c (Van Number)"
echo "  - Reg_No__c (Registration Number)"
echo "  - Tracking_Number__c (Tracking Number)"
echo "  - Vehicle_Type__c (Type of vehicle)"
echo "  - Description (Text area)"
echo "  - Status__c (Uploaded/Allocated/Spare/Reserved/Written Off)"
echo "  - CreatedDate (Auto)"
echo ""

# Testing endpoints
echo "üß™ Testing Endpoints:"
echo ""
echo "1. Lookup Vehicle by Van Number:"
echo "   curl -X GET http://localhost:8000/api/vehicles/lookup/379"
echo ""
echo "2. Get All Assets:"
echo "   curl -X GET http://localhost:8000/api/assets/all"
echo ""
echo "3. Get Asset by Van Number:"
echo "   curl -X GET http://localhost:8000/api/assets/by-van/379"
echo ""
echo "4. Create New Asset:"
echo '   curl -X POST http://localhost:8000/api/assets/create \'
echo '     -H "Content-Type: application/json" \'
echo "     -d '{...asset data...}'"
echo ""
echo "5. Extract Image Details:"
echo '   curl -X POST http://localhost:8000/api/ai/extract-vehicle-details \'
echo "     -F \"image=@vehicle.jpg\" \\"
echo "     -F \"van_number=379\""
echo ""

# Running the application
echo "‚ñ∂Ô∏è  Running the Application:"
echo ""
echo "Terminal 1 - Backend:"
echo "  cd backend"
echo "  python -m uvicorn app:app --reload --port 8000"
echo ""
echo "Terminal 2 - Frontend:"
echo "  npm run dev"
echo ""

# Access the application
echo "üåê Access the Application:"
echo "  Upload Page: http://localhost:5173/upload"
echo "  Assets Gallery: http://localhost:5173/assets"
echo ""

# Features Overview
echo "‚ú® Features:"
echo ""
echo "Upload Page (/upload):"
echo "  ‚úÖ Image upload with preview"
echo "  ‚úÖ Van number auto-search"
echo "  ‚úÖ Auto-fetch registration, tracking, driver history"
echo "  ‚úÖ AI-powered image analysis"
echo "  ‚úÖ Save as asset"
echo ""
echo "Assets Gallery (/assets):"
echo "  ‚úÖ Grid view of all vehicles"
echo "  ‚úÖ Real-time search/filter"
echo "  ‚úÖ Status badges"
echo "  ‚úÖ Quick info cards"
echo "  ‚úÖ Sort by date"
echo ""
echo "Asset Detail (/assets/:id):"
echo "  ‚úÖ Full vehicle information"
echo "  ‚úÖ Vehicle image display"
echo "  ‚úÖ Complete driver history"
echo "  ‚úÖ AI analysis report"
echo "  ‚úÖ Export functionality"
echo "  ‚úÖ Delete option"
echo ""

echo "=========================================================="
echo "‚úÖ Setup complete! Start the development servers above."
echo "=========================================================="
